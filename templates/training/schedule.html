{% extends 'index.html' %}
{% load static %}
{% load i18n %}

{% block content %}
<div class="oh-card" style="background: #ffffff; border: 1px solid #e5e7eb; border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); margin: 6px; overflow: hidden;">
    <div class="oh-card__header" style="padding: 15px 18px; border-bottom: 1px solid #e5e7eb; background: #f9fafb; display: flex; justify-content: space-between; align-items: center;">
        <h4 class="oh-card__title" style="margin: 0; font-size: 18px; font-weight: 600; color: #111827;">{% trans "Training Schedule" %}</h4>
        <div class="oh-card__actions">
            <button onclick="openCreateTrainingModal()" class="oh-btn oh-btn--create" style="background: #e53e3e; border: none; color: #ffffff; padding: 8px 16px; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 6px;" onmouseover="this.style.background='#c53030'" onmouseout="this.style.background='#e53e3e'">
                <span style="font-size: 16px; font-weight: 400;">+</span>
                {% trans "Create" %}
            </button>
        </div>
    </div>
    <div class="oh-card__body" style="padding: 14px;">
        <!-- Summary Stats -->
        <div class="oh-summary-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; margin-bottom: 24px;">
            <div class="oh-summary-item" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px; padding: 16px; text-align: center;">
                <span class="oh-summary-item__label" style="display: block; font-size: 13px; color: #6b7280; margin-bottom: 8px; font-weight: 500;">{% trans "Upcoming Sessions" %}</span>
                <span class="oh-summary-item__value" style="font-size: 24px; font-weight: 700; color: #111827;">12</span>
            </div>
            <div class="oh-summary-item" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px; padding: 16px; text-align: center;">
                <span class="oh-summary-item__label" style="display: block; font-size: 13px; color: #6b7280; margin-bottom: 8px; font-weight: 500;">{% trans "This Week" %}</span>
                <span class="oh-summary-item__value" style="font-size: 24px; font-weight: 700; color: #111827;">5</span>
            </div>
            <div class="oh-summary-item" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px; padding: 16px; text-align: center;">
                <span class="oh-summary-item__label" style="display: block; font-size: 13px; color: #6b7280; margin-bottom: 8px; font-weight: 500;">{% trans "Enrolled Trainees" %}</span>
                <span class="oh-summary-item__value" style="font-size: 24px; font-weight: 700; color: #111827;">48</span>
            </div>
            <div class="oh-summary-item" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px; padding: 16px; text-align: center;">
                <span class="oh-summary-item__label" style="display: block; font-size: 13px; color: #6b7280; margin-bottom: 8px; font-weight: 500;">{% trans "Available Slots" %}</span>
                <span class="oh-summary-item__value" style="font-size: 24px; font-weight: 700; color: #111827;">23</span>
            </div>
        </div>

        <!-- Filter Section -->
        <div class="oh-filter-section" style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 6px; padding: 20px; margin-bottom: 24px; display: flex; gap: 20px; flex-wrap: wrap;">
            <div class="oh-filter-group" style="flex: 1; min-width: 200px;">
                <label class="oh-label" style="display: block; font-size: 14px; font-weight: 500; color: #374151; margin-bottom: 6px;">{% trans "Date Range" %}</label>
                <select class="oh-select oh-select--sm" style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; color: #111827; background: #ffffff;">
                    <option>{% trans "Next 7 Days" %}</option>
                    <option>{% trans "Next 30 Days" %}</option>
                    <option>{% trans "This Month" %}</option>
                    <option>{% trans "Next Month" %}</option>
                </select>
            </div>
            <div class="oh-filter-group" style="flex: 1; min-width: 200px;">
                <label class="oh-label" style="display: block; font-size: 14px; font-weight: 500; color: #374151; margin-bottom: 6px;">{% trans "Course Category" %}</label>
                <select class="oh-select oh-select--sm" style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; color: #111827; background: #ffffff;">
                    <option>{% trans "All Categories" %}</option>
                    <option>Safety</option>
                    <option>Leadership</option>
                    <option>Technical</option>
                    <option>Compliance</option>
                </select>
            </div>
            <div class="oh-filter-group" style="flex: 1; min-width: 150px;">
                <label class="oh-label" style="display: block; font-size: 14px; font-weight: 500; color: #374151; margin-bottom: 6px;">{% trans "Status" %}</label>
                <select class="oh-select oh-select--sm" style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; color: #111827; background: #ffffff;">
                    <option>{% trans "All Status" %}</option>
                    <option>{% trans "Scheduled" %}</option>
                    <option>{% trans "In Progress" %}</option>
                    <option>{% trans "Completed" %}</option>
                </select>
            </div>
        </div>

        <!-- Training Schedule Table -->
        <div style="overflow-x: auto; border: 1px solid #e5e7eb; border-radius: 6px;">
            <table class="oh-table" style="width: 100%; border-collapse: collapse; font-size: 14px; min-width: 800px;">
                <thead>
                    <tr style="background: #f9fafb;">
                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">{% trans "Course Name" %}</th>
                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">{% trans "Instructor" %}</th>
                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">{% trans "Date & Time" %}</th>
                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">{% trans "Duration" %}</th>
                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">{% trans "Enrolled" %}</th>
                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">{% trans "Capacity" %}</th>
                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">{% trans "Status" %}</th>
                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">{% trans "Actions" %}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                        <td style="padding: 12px 16px; color: #111827; font-weight: 500;">Workplace Safety Training</td>
                        <td style="padding: 12px 16px; color: #6b7280;">Dr. Sarah Wilson</td>
                        <td style="padding: 12px 16px;">
                            <div>
                                <div style="color: #111827; font-weight: 500;">Jan 25, 2024</div>
                                <div style="color: #6b7280; font-size: 12px;">09:00 - 17:00</div>
                            </div>
                        </td>
                        <td style="padding: 12px 16px; color: #6b7280;">8 hours</td>
                        <td style="padding: 12px 16px; color: #111827; font-weight: 500;">12</td>
                        <td style="padding: 12px 16px; color: #6b7280;">15</td>
                        <td style="padding: 12px 16px;">
                            <span style="background: #dcfce7; color: #166534; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 500;">{% trans "Scheduled" %}</span>
                        </td>
                        <td style="padding: 12px 16px;">
                            <button style="background: none; border: none; color: #3b82f6; font-size: 12px; cursor: pointer; margin-right: 8px;" onmouseover="this.style.color='#1d4ed8'" onmouseout="this.style.color='#3b82f6'">{% trans "Edit" %}</button>
                            <button style="background: none; border: none; color: #6b7280; font-size: 12px; cursor: pointer;" onmouseover="this.style.color='#374151'" onmouseout="this.style.color='#6b7280'">{% trans "View" %}</button>
                        </td>
                    </tr>
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                        <td style="padding: 12px 16px; color: #111827; font-weight: 500;">Leadership Development Program</td>
                        <td style="padding: 12px 16px; color: #6b7280;">Michael Chen</td>
                        <td style="padding: 12px 16px;">
                            <div>
                                <div style="color: #111827; font-weight: 500;">Jan 26, 2024</div>
                                <div style="color: #6b7280; font-size: 12px;">10:00 - 16:00</div>
                            </div>
                        </td>
                        <td style="padding: 12px 16px; color: #6b7280;">6 hours</td>
                        <td style="padding: 12px 16px; color: #111827; font-weight: 500;">8</td>
                        <td style="padding: 12px 16px; color: #6b7280;">12</td>
                        <td style="padding: 12px 16px;">
                            <span style="background: #dbeafe; color: #1e40af; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 500;">{% trans "In Progress" %}</span>
                        </td>
                        <td style="padding: 12px 16px;">
                            <button style="background: none; border: none; color: #3b82f6; font-size: 12px; cursor: pointer; margin-right: 8px;" onmouseover="this.style.color='#1d4ed8'" onmouseout="this.style.color='#3b82f6'">{% trans "Edit" %}</button>
                            <button style="background: none; border: none; color: #6b7280; font-size: 12px; cursor: pointer;" onmouseover="this.style.color='#374151'" onmouseout="this.style.color='#6b7280'">{% trans "View" %}</button>
                        </td>
                    </tr>
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                        <td style="padding: 12px 16px; color: #111827; font-weight: 500;">Data Privacy & Security</td>
                        <td style="padding: 12px 16px; color: #6b7280;">Jennifer Adams</td>
                        <td style="padding: 12px 16px;">
                            <div>
                                <div style="color: #111827; font-weight: 500;">Jan 28, 2024</div>
                                <div style="color: #6b7280; font-size: 12px;">13:00 - 17:00</div>
                            </div>
                        </td>
                        <td style="padding: 12px 16px; color: #6b7280;">4 hours</td>
                        <td style="padding: 12px 16px; color: #111827; font-weight: 500;">15</td>
                        <td style="padding: 12px 16px; color: #6b7280;">20</td>
                        <td style="padding: 12px 16px;">
                            <span style="background: #dcfce7; color: #166534; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 500;">{% trans "Scheduled" %}</span>
                        </td>
                        <td style="padding: 12px 16px;">
                            <button style="background: none; border: none; color: #3b82f6; font-size: 12px; cursor: pointer; margin-right: 8px;" onmouseover="this.style.color='#1d4ed8'" onmouseout="this.style.color='#3b82f6'">{% trans "Edit" %}</button>
                            <button style="background: none; border: none; color: #6b7280; font-size: 12px; cursor: pointer;" onmouseover="this.style.color='#374151'" onmouseout="this.style.color='#6b7280'">{% trans "View" %}</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Create Training Modal -->
<div id="trainingScheduleModal" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.5); display: none; justify-content: center; align-items: center; z-index: 9999; padding: 20px; box-sizing: border-box;">
    <div style="background: white; border-radius: 12px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); width: 100%; max-width: 900px; max-height: 95vh; overflow-y: auto; position: relative;">
        <!-- Modal Header -->
        <div style="padding: 14px 22px; border-bottom: 1px solid #e5e7eb; background: #f9fafb; border-radius: 12px 12px 0 0; position: sticky; top: 0; z-index: 10;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; font-size: 24px; font-weight: 700; color: #111827;">{% trans "Create Training Schedule" %}</h3>
                <button onclick="closeModal()" style="background: none; border: none; font-size: 28px; color: #6b7280; cursor: pointer; padding: 8px; line-height: 1; border-radius: 6px; transition: all 0.2s;" onmouseover="this.style.background='#f3f4f6'; this.style.color='#374151'" onmouseout="this.style.background='none'; this.style.color='#6b7280'">×</button>
            </div>
        </div>

        <!-- Modal Body -->
        <div style="padding: 32px;">
            <form id="trainingScheduleForm" method="post" action="{% url 'create-training-schedule' %}">
                {% csrf_token %}
                
                <!-- Course Information Section -->
                <div style="margin-bottom: 40px;">
                    <h4 style="margin: 0 0 24px 0; font-size: 18px; font-weight: 600; color: #111827; padding-bottom: 12px; border-bottom: 2px solid #e5e7eb;">{% trans "Course Information" %}</h4>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "Course Name" %} <span style="color: #dc2626;">*</span>
                            </label>
                            <input type="text" name="course_name" required style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; transition: border-color 0.2s; box-sizing: border-box;" placeholder="{% trans 'Enter course name' %}" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'">
                        </div>
                        
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "Course Category" %} <span style="color: #dc2626;">*</span>
                            </label>
                            <select name="course_category" required style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; transition: border-color 0.2s; box-sizing: border-box;" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'">
                                <option value="">{% trans "Select Category" %}</option>
                                <option value="safety">{% trans "Safety" %}</option>
                                <option value="leadership">{% trans "Leadership" %}</option>
                                <option value="technical">{% trans "Technical" %}</option>
                                <option value="compliance">{% trans "Compliance" %}</option>
                                <option value="soft_skills">{% trans "Soft Skills" %}</option>
                                <option value="management">{% trans "Management" %}</option>
                            </select>
                        </div>
                    </div>

                    <div style="margin-bottom: 24px;">
                        <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                            {% trans "Course Description" %}
                        </label>
                        <textarea name="course_description" rows="4" style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; resize: vertical; transition: border-color 0.2s; box-sizing: border-box;" placeholder="{% trans 'Enter course description and objectives' %}" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'"></textarea>
                    </div>
                </div>

                <!-- Schedule Information Section -->
                <div style="margin-bottom: 40px;">
                    <h4 style="margin: 0 0 24px 0; font-size: 18px; font-weight: 600; color: #111827; padding-bottom: 12px; border-bottom: 2px solid #e5e7eb;">{% trans "Schedule Information" %}</h4>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "Training Date" %} <span style="color: #dc2626;">*</span>
                            </label>
                            <input type="date" name="training_date" required style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; transition: border-color 0.2s; box-sizing: border-box;" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'">
                        </div>
                        
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "Duration" %} <span style="color: #dc2626;">*</span>
                            </label>
                            <select name="duration" required style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; transition: border-color 0.2s; box-sizing: border-box;" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'">
                                <option value="">{% trans "Select Duration" %}</option>
                                <option value="2">{% trans "2 hours" %}</option>
                                <option value="4">{% trans "4 hours" %}</option>
                                <option value="6">{% trans "6 hours" %}</option>
                                <option value="8">{% trans "8 hours" %}</option>
                                <option value="16">{% trans "2 days (16 hours)" %}</option>
                                <option value="24">{% trans "3 days (24 hours)" %}</option>
                            </select>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "Start Time" %} <span style="color: #dc2626;">*</span>
                            </label>
                            <input type="time" name="start_time" required style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; transition: border-color 0.2s; box-sizing: border-box;" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'">
                        </div>
                        
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "End Time" %} <span style="color: #dc2626;">*</span>
                            </label>
                            <input type="time" name="end_time" required style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; transition: border-color 0.2s; box-sizing: border-box;" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'">
                        </div>
                    </div>

                    <div style="margin-bottom: 24px;">
                        <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                            {% trans "Training Location" %} <span style="color: #dc2626;">*</span>
                        </label>
                        <input type="text" name="location" required style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; transition: border-color 0.2s; box-sizing: border-box;" placeholder="{% trans 'Enter training venue or room' %}" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'">
                    </div>
                </div>

                <!-- Instructor & Capacity Section -->
                <div style="margin-bottom: 40px;">
                    <h4 style="margin: 0 0 24px 0; font-size: 18px; font-weight: 600; color: #111827; padding-bottom: 12px; border-bottom: 2px solid #e5e7eb;">{% trans "Instructor & Capacity" %}</h4>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "Instructor" %} <span style="color: #dc2626;">*</span>
                            </label>
                            <select name="instructor" required style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; transition: border-color 0.2s; box-sizing: border-box;" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'">
                                <option value="">{% trans "Select Instructor" %}</option>
                                <option value="dr_sarah_wilson">Dr. Sarah Wilson</option>
                                <option value="michael_chen">Michael Chen</option>
                                <option value="jennifer_adams">Jennifer Adams</option>
                                <option value="david_kumar">David Kumar</option>
                                <option value="lisa_rodriguez">Lisa Rodriguez</option>
                            </select>
                        </div>
                        
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "Maximum Capacity" %} <span style="color: #dc2626;">*</span>
                            </label>
                            <input type="number" name="max_capacity" required min="1" max="100" style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; transition: border-color 0.2s; box-sizing: border-box;" placeholder="{% trans 'Maximum number of trainees' %}" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'">
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "Prerequisites" %}
                            </label>
                            <textarea name="prerequisites" rows="3" style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; resize: vertical; transition: border-color 0.2s; box-sizing: border-box;" placeholder="{% trans 'Any required qualifications or prior training' %}" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'"></textarea>
                        </div>
                        
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "Training Materials" %}
                            </label>
                            <textarea name="materials" rows="3" style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; resize: vertical; transition: border-color 0.2s; box-sizing: border-box;" placeholder="{% trans 'Required materials, handouts, or equipment' %}" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Additional Settings Section -->
                <div style="margin-bottom: 40px;">
                    <h4 style="margin: 0 0 24px 0; font-size: 18px; font-weight: 600; color: #111827; padding-bottom: 12px; border-bottom: 2px solid #e5e7eb;">{% trans "Additional Settings" %}</h4>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "Registration Deadline" %}
                            </label>
                            <input type="date" name="registration_deadline" style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; transition: border-color 0.2s; box-sizing: border-box;" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'">
                        </div>
                        
                        <div>
                            <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                {% trans "Training Cost" %}
                            </label>
                            <input type="number" name="cost" min="0" step="0.01" style="width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 14px; color: #111827; background: #ffffff; transition: border-color 0.2s; box-sizing: border-box;" placeholder="{% trans 'Cost per trainee (optional)' %}" onfocus="this.style.borderColor='#3b82f6'" onblur="this.style.borderColor='#d1d5db'">
                        </div>
                    </div>

                    <div style="margin-bottom: 24px;">
                        <div style="display: flex; gap: 32px; flex-wrap: wrap;">
                            <label style="display: flex; align-items: center; gap: 12px; font-size: 14px; color: #374151; cursor: pointer; font-weight: 500;">
                                <input type="checkbox" name="certification_provided" value="1" style="width: 18px; height: 18px; accent-color: #dc2626;">
                                {% trans "Certification Provided" %}
                            </label>
                            
                            <label style="display: flex; align-items: center; gap: 12px; font-size: 14px; color: #374151; cursor: pointer; font-weight: 500;">
                                <input type="checkbox" name="mandatory_training" value="1" style="width: 18px; height: 18px; accent-color: #dc2626;">
                                {% trans "Mandatory Training" %}
                            </label>
                            
                            <label style="display: flex; align-items: center; gap: 12px; font-size: 14px; color: #374151; cursor: pointer; font-weight: 500;">
                                <input type="checkbox" name="recurring_training" value="1" style="width: 18px; height: 18px; accent-color: #dc2626;">
                                {% trans "Recurring Training" %}
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div style="padding-top: 24px; border-top: 1px solid #e5e7eb; display: flex; justify-content: flex-end; gap: 16px;">
                    <button type="button" onclick="closeModal()" style="background: #ffffff; border: 2px solid #d1d5db; color: #374151; padding: 12px 24px; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#f9fafb'; this.style.borderColor='#9ca3af'" onmouseout="this.style.background='#ffffff'; this.style.borderColor='#d1d5db'">
                        {% trans "Cancel" %}
                    </button>
                    <button type="submit" style="background: #dc2626; border: none; color: #ffffff; padding: 12px 24px; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#b91c1c'" onmouseout="this.style.background='#dc2626'">
                        {% trans "Create Training Schedule" %}
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
function openCreateTrainingModal() {
    const modal = document.getElementById('trainingScheduleModal');
    modal.style.display = 'flex';
    // Prevent body scroll when modal is open
    document.body.style.overflow = 'hidden';
}

function closeModal() {
    const modal = document.getElementById('trainingScheduleModal');
    modal.style.display = 'none';
    // Restore body scroll
    document.body.style.overflow = 'auto';
}

// Close modal when clicking outside
document.getElementById('trainingScheduleModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeModal();
    }
});

// Close modal with Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeModal();
    }
});

// Form validation and submission
document.getElementById('trainingScheduleForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Basic validation
    const startTime = document.querySelector('input[name="start_time"]').value;
    const endTime = document.querySelector('input[name="end_time"]').value;
    
    if (startTime && endTime && startTime >= endTime) {
        alert('{% trans "End time must be after start time" %}');
        return;
    }
    
    // Submit the form
    this.submit();
});

// Auto-calculate end time based on start time and duration
document.querySelector('select[name="duration"]').addEventListener('change', function() {
    const startTimeInput = document.querySelector('input[name="start_time"]');
    const endTimeInput = document.querySelector('input[name="end_time"]');
    
    if (startTimeInput.value && this.value) {
        const startTime = new Date('2000-01-01 ' + startTimeInput.value);
        const duration = parseInt(this.value);
        const endTime = new Date(startTime.getTime() + (duration * 60 * 60 * 1000));
        
        const endTimeString = endTime.toTimeString().slice(0, 5);
        endTimeInput.value = endTimeString;
    }
});
</script>
{% endblock %}
